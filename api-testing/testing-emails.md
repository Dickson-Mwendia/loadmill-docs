# ✉️ Automated Email Testing

Automated emails are a common component in many web applications. Since they serve an important role in many critical user-flows such as registration, authentication, and system notifications, they should be tested carefully for any breaking changes.

Using Loadmill's ephemeral inbox and dedicated email API, you can include email workflows in your automated tests.

## Key Concepts

**The Loadmill ephemeral inbox** receives emails at `${domain}+${UUID}@test.loadmill.com` where `${domain}` is your Loadmill team's email domain and `${UUID}` is a random UUID generated by the built-in [\_\_random\_uuid\(\)](test-suite-editor/functions.md#__random_uuid) functions in your Loadmill tests.

**The Loadmill open email API** is available at this URL:`https://www.loadmill.com/open-api/emails/${UUID}`. Use it to review the latest email sent to that UUID. The API will respond with the content of the last email sent to that address and can be used to extract and validate it.

## User Registration Flow Example

Create a dynamic UUID parameter in the parameters section. Set its value to be the built-in \_\_random\_uuid function:

![](../.gitbook/assets/image%20%2845%29.png)

Use the UUID parameter to construct a dynamic email address and use it as the user registration email address:

![](../.gitbook/assets/image%20%2841%29.png)

In the following request, use the open email API and the UUID parameter to retrieve the signup verification email:

![](../.gitbook/assets/image%20%2847%29.png)

The last email sent to a specific UUID address will be available in text/html format and stored for 24-48 hours. \([example](https://www.loadmill.com/open-api/emails/ca691a76-24b4-457d-a2cc-446ef86f3dff)\) 

![](../.gitbook/assets/image%20%2844%29.png)

Use the jQuery extractor to extract values from the email content. This extractor example will extract the link from the "Verify Address" button:

![](../.gitbook/assets/image%20%2842%29.png)

{% hint style="info" %}
Note: when using the extracted `${link}`parameter as the base URL for the following request, give it a default value in the parameters section, in case that no valid URL will be extracted from the email.
{% endhint %}

### Suggested workflow

![](../.gitbook/assets/image%20%2848%29.png)

